{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://weboftrust.app/schemas/profile.schema.json",
  "title": "Profile",
  "description": "Das Profil einer Identität im Web of Trust",
  "type": "object",
  "required": ["did", "publicKey", "name", "createdAt", "updatedAt"],
  "properties": {
    "did": {
      "type": "string",
      "pattern": "^did:key:z[1-9A-HJ-NP-Za-km-z]+$",
      "description": "Dezentraler Identifier (did:key Format)"
    },
    "publicKey": {
      "type": "object",
      "required": ["type", "publicKeyMultibase"],
      "properties": {
        "type": {
          "type": "string",
          "const": "Ed25519VerificationKey2020"
        },
        "publicKeyMultibase": {
          "type": "string",
          "pattern": "^z[1-9A-HJ-NP-Za-km-z]+$",
          "description": "Ed25519 Public Key in Multibase-Encoding"
        }
      }
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "description": "Anzeigename"
    },
    "bio": {
      "type": "string",
      "maxLength": 500,
      "description": "Optionale Beschreibung"
    },
    "photo": {
      "type": "object",
      "properties": {
        "mimeType": {
          "type": "string",
          "enum": ["image/jpeg", "image/png"],
          "description": "MIME-Type des Bildes"
        },
        "data": {
          "type": "string",
          "contentEncoding": "base64",
          "description": "Base64-kodierte Bilddaten"
        },
        "hash": {
          "type": "string",
          "pattern": "^sha256:[a-f0-9]{64}$",
          "description": "SHA-256 Hash der Originaldaten"
        }
      },
      "required": ["mimeType", "data"]
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Erstellungszeitpunkt (ISO 8601)"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Letzter Änderungszeitpunkt (ISO 8601)"
    }
  },
  "examples": [
    {
      "did": "did:key:z6MkhaXgBZDvotDkL5257faiztiGiC2QtKLGpbnnEGta2doK",
      "publicKey": {
        "type": "Ed25519VerificationKey2020",
        "publicKeyMultibase": "z6MkhaXgBZDvotDkL5257faiztiGiC2QtKLGpbnnEGta2doK"
      },
      "name": "Anna Müller",
      "bio": "Aktiv im Gemeinschaftsgarten Sonnenberg",
      "createdAt": "2025-01-01T10:00:00Z",
      "updatedAt": "2025-01-08T12:00:00Z"
    }
  ]
}
